<html>

<!--
=== UCSF ChimeraX Copyright ===
Copyright 2016 Regents of the University of California.
All rights reserved.  This software provided pursuant to a
license agreement containing restrictions on its disclosure,
duplication and use.  For details see:
http://www.rbvi.ucsf.edu/chimerax/docs/licensing.html
This notice must be embedded in or attached to all copies,
including partial copies, of the software or any revisions
or derivations thereof.
=== UCSF ChimeraX Copyright ===
-->

<head>
<link rel="stylesheet" type="text/css" href="../userdocs.css" />
<title>Command: surface</title>
</head><body>

<a name="top"></a>
<a href="../index.html">
<img width="60px" src="../ChimeraX-docs-icon.svg" alt="ChimeraX docs icon"
class="clRight" title="User Guide Index"/></a>

<h3><a href="../index.html#commands">Command</a>: surface</h3>
<h3><a href="usageconventions.html">Usage</a>:
 <br><b>surface</b>
&nbsp;<a href="atomspec.html"><i>atom-spec1</i></a>&nbsp;
[&nbsp;enclose
&nbsp;<a href="atomspec.html"><i>atom-spec2</i></a>&nbsp;]
[&nbsp;include
&nbsp;<a href="atomspec.html"><i>atom-spec3</i></a>&nbsp;]
[&nbsp;replace&nbsp;&nbsp;true&nbsp;|&nbsp;false&nbsp;]
[&nbsp;probeRadius&nbsp;<i>rad</i>&nbsp;]
[&nbsp;resolution&nbsp;<i>r</i>&nbsp; [&nbsp;level&nbsp;<i>l</i>&nbsp;]]
[&nbsp;gridSpacing&nbsp;<i>s</i>&nbsp;]
[&nbsp;sharpBoundaries&nbsp;&nbsp;true&nbsp;|&nbsp;false&nbsp;]
[&nbsp;visiblePatches&nbsp;<i>N</i>&nbsp;] 
</h3>
<h3><a href="usageconventions.html">Usage</a>:
<br><b>surface</b> (&nbsp;<b>hide</b>&nbsp;|&nbsp;<b>show</b>&nbsp;|&nbsp;<b>close</b>&nbsp;)
&nbsp;<a href="atomspec.html"><i>atom-spec</i></a>
</h3>
<h3><a href="usageconventions.html">Usage</a>:
<br><b>surface</b> (&nbsp;<b>hide</b>&nbsp;|&nbsp;<b>show</b>&nbsp;|&nbsp;<b>close</b>&nbsp;)
&nbsp;<a href="atomspec.html#othermodels"><i>surf-model</i></a>
</h3>
<h3><a href="usageconventions.html">Usage</a>:
<br><b>surface style</b>
&nbsp;<a href="atomspec.html#othermodels"><i>surf-model</i></a>&nbsp;
(&nbsp;<b>solid</b>&nbsp;|&nbsp;<b>mesh</b>&nbsp;|&nbsp;<b>dot</b>&nbsp;)
</h3>
<p>
The <b>surface</b> command creates and displays <b><i>molecular surfaces</i></b>,
either atomically detailed solvent-excluded surfaces (SES, default) or
lower-resolution Gaussian surfaces (GS).
See also:
<a href="#sop"><b>surface</b> operations</a>,
<a href="show.html"><b>show</b></a>,
<a href="color.html"><b>color</b></a>,
<a href="measure.html"><b>measure</b></a>,
<a href="sym.html"><b>sym</b></a>,
<a href="volume.html"><b>volume</b></a>,
<a href="volume.html#vop"><b>volume</b> operations</a>,
<a href="colortables.html#autocolors">chain colors</a>,
<a href="../tools/moldisplay.html"><b>Molecule Display Toolbar</b></a>
<a href="../tools/moldisplay.html" title="Molecule Display Toolbar...">
<img class="icon" border=1 src="../tools/shortcut-icons/surfshow.png"></a>
<a href="../tools/moldisplay.html" title="Molecule Display Toolbar...">
<img class="icon" border=1 src="../tools/shortcut-icons/surfhide.png"></a>
</p>
<a name="surfdefs"></a>
<ul>
<li>A <b><i>solvent-excluded surface</i></b> is
composed of the contact, toroidal, and reentrant surfaces of a probe sphere 
rolled over the atomic <a href="../radii.html">VDW spheres</a>.
Atomic patches in an SES can be controlled 
(hidden, shown, <i>etc.</i>) independently by specifying the corresponding atoms,
and their <a href="../selection.html">selection</a>
is tied to that of the corresponding atoms.
An SES can also be specified by its own model number to enable/disable display
as a whole without changing the display of its atomic patches
(see <a href="../hierarchy.html">hierarchy</a>). 
<li>A <b><i>solvent-accessible surface</i></b> (not shown by ChimeraX)
is the surface traced out by the center of the probe sphere
rolled over the atomic <a href="../radii.html">VDW spheres</a>.
<li>A <b><i>Gaussian surface</i></b>
is indicated with the <a href="#parameters"><b>resolution</b></a> option
and will not retain atomic associations 
unless <a href="#sharpBoundaries">sharp boundaries</a> are used.
A surface without atomic associations can only be controlled as a whole,
by specifying its own model number or the atoms used in its calculation.
<!-- can get GS patches by replacing SES with GS since sharp stays true -->
<!-- confusing that 1gcn GS w/o sharp boundaries can be displayed with surf :tyr,
show :tyr targ s, but not surf show :tyr, only surf show or surf show protein -->
</ul>
<p>
By default, the surfaces are made to <a href="#grouping">enclose</a>
only the residues in biopolymer chains, grouped by chain ID. 
Typically, this gives a separate molecular surface for each peptide
or nucleic acid chain, and specifying a subset of the atoms in the chain
will show/hide their patches within the context of
the entire chain; for example, no patches will be shown
for atoms that are completely buried inside the chain.
</p><p>
The <b>surface show</b> command applies to <i>pre-existing</i> surfaces only,
whereas <b>surface</b> (without <b>show</b>) creates a new surface as needed.
<!-- still unclear to me exactly what this entails -->
However, if the intent is to switch between surface types (SES and GS)
or to create a new surface with default parameters, 
closing an existing surface first is recommended, otherwise
some of its settings may be retained.
The <b>surface close</b> command removes the surface models specified directly,
or all surface models that enclose any of the specified atoms.
</p><p>
Surface display style (solid, mesh, or dot) can be adjusted with
<a href="#style"><b>surface style</b></a>.
</p>

<ul class="none">
<li><a href="#options"><b>Surface Creation Options</b></a>
<li><a href="#examples"><b>Creation/Display Examples</b></a>
<li><a href="#style"><b>Surface Style</b></a>
<li><a href="#sop"><b>Surface Operations (Editing)</b></a> 
  <ul>
  <li><a href="#dust"><b>surface dust</b></a>
  <li><a href="#zone"><b>surface zone</b></a>
  </ul>
<li><a href="#notes"><b>Technical Notes</b></a>
</ul>

<a name="options"></a>
<p class="nav">
[<a href="#top">back to top</a>]
</p>
<h3>Surface Creation Options</h3>

<blockquote>
<a href="usageconventions.html"><b>Usage</b></a>:
<b>surface</b>
&nbsp;<a href="atomspec.html"><i>atom-spec1</i></a>&nbsp;
[&nbsp;<b>enclose</b>&nbsp;&nbsp;<a href="atomspec.html"><i>atom-spec2</i></a>&nbsp;]
[&nbsp;<b>include</b>&nbsp;&nbsp;<a href="atomspec.html"><i>atom-spec3</i></a>&nbsp;]
[&nbsp;<b>replace</b>&nbsp;&nbsp;<b>true</b>&nbsp;|&nbsp;false&nbsp;]
[&nbsp;<b>probeRadius</b>&nbsp;&nbsp;<i>rad</i>&nbsp;]
[&nbsp;<b>resolution</b>&nbsp;&nbsp;<i>r</i>&nbsp;[&nbsp;<b>level</b>&nbsp;<i>l</i>&nbsp;]]
[&nbsp;<b>gridSpacing</b>&nbsp;&nbsp;<i>s</i>&nbsp;]
[&nbsp;<b>sharpBoundaries</b>&nbsp;&nbsp;true&nbsp;|&nbsp;false&nbsp;]
[&nbsp;<b>visiblePatches</b>&nbsp;&nbsp;<i>N</i>&nbsp;]
</blockquote>
<p>
Options for surface creation can be categorized as:
</p>
<ul>
<li><a href="#grouping">Grouping Atoms into Surfaces</a>
<li><a href="#parameters">Calculation Parameters</a>
<li><a href="#appearance">Other Appearance Options</a>
</ul>
</p>

<a name="grouping"></a>
<h4><a href="#options" class="nounder"><b>&larr;</b></a>
Grouping Atoms into Surfaces</h4>
<p>
The <b>enclose</b> option can be used to specify a different set of atoms 
(<a href="atomspec.html"><i>atom-spec2</i></a>)
to enclose within a single surface, for <a href="#examples">example</a>,
to coalesce
biopolymer chains with different chain IDs into a single molecular envelope.
</p><p>
The <b>include</b> option can be used to force including atoms that
would otherwise be ignored 
(residues not within a biopolymer chain, such as ligands, solvent, and ions)
into the same envelope as the biopolymer atoms with the same chain ID.
For convenience, however, if
<a href="atomspec.html"><i>atom-spec1</i></a>
contains only such atoms, they will be surfaced separately
(grouped by chain ID) and the <b>include</b> option is not needed.
</p><p>
The <b>replace</b> option (default <b>true</b>)
indicates removing all previously created surface models 
that enclose any of the same atoms as the current surface.
Successive uses of the <b>surface</b> command with <b>replace false</b>
can produce multiple surface models that enclose the same set of atoms
or different but overlapping sets of atoms. Surface model number assignments
are discussed <a href="#notes">below</a>.
</p>

<a name="parameters"></a>
<h4><a href="#options" class="nounder"><b>&larr;</b></a>
Calculation Parameters</h4>
<p>
Aside from how atoms are <a href="#grouping">grouped</a>, molecular surface
parameters can be specified with the following options:
</p>
<ul>
<li>The <b>resolution</b> option
indicates creating a low-resolution Gaussian surface 
instead of a solvent-excluded surface (SES).
A pseudo-density map is generated by summing over atoms, where each atom is
described as a 3D Gaussian distribution of width proportional to the
<b>resolution</b> <i>r</i> and amplitude (height) equal to the atomic number.
The summed density map is contoured at the specified isosurface
<b>level</b> <i>l</i> and then discarded.
The default contour level is half the minimum of
the map values at atom positions, as determined by interpolation.
The level is reported in the <a href="../tools/log.html"><b>Log</b></a>.
A smaller contour level gives a
larger surface, that is, farther out from the atomic centers.
A Gaussian surface will not retain atomic associations 
(to allow specifying per-atom patches in hide/show/color operations)
unless <a href="#sharpBoundaries">sharp boundaries</a> are used.
<li>If <b>resolution</b> is not given, an SES will be calculated with
<b>probeRadius</b> <i>rad</i>, the radius of the 
&ldquo;rolling sphere&rdquo; probe (default <b>1.4</b> &Aring;, 
the value often used to approximate a water molecule).
A larger probe radius gives a less detailed and less bumpy surface.
<li>The <b>gridSpacing</b> <i>s</i> is the spacing of the grid used to 
calculate either type of surface. The default spacing is <b>0.5</b> &Aring;
for an SES, <b>0.1<i>r</i></b> (one-tenth the resolution) 
for a Gaussian surface.
A smaller spacing gives a smoother, more finely triangulated surface,
but uses more memory.
</ul>
<p>
The default values apply to the initial creation of a surface,
but when the <b>surface</b> command acts on an existing surface,
only the parameters explicitly specified are changed.
</p>

<a name="appearance"></a>
<h4><a href="#options" class="nounder"><b>&larr;</b></a>
Other Appearance Options</h4>
<p>
The <a name="sharpBoundaries"><b>sharpBoundaries</b></a> option 
(default <b>true</b> for an SES, default <b>false</b> for a Gaussian surface)
adjusts the triangulation of the surface to produce abrupt and relatively
straight boundaries between per-atom patches. This significantly reduces the
sawtooth appearance where adjacent per-atom patches differ in color or 
display status (hidden <i>vs.</i> shown).
A Gaussian surface will not retain atomic associations 
unless sharp boundaries are used.
</p><p>
The <b>visiblePatches</b> option indicates hiding all but the 
<i>N</i> largest connected surface patches (per surface model) for
the specified atoms; by removing the visual clutter of small patches,
this can significantly enhance viewing of pocket surfaces.
Ranking to determine the largest is based on surface area, <i>including</i>
any portions hidden by clipping.
See also: <a href="#dust"><b>surface dust</b></a>
</p>

<a name="examples"></a>
<p class="nav">
[<a href="#top">back to top</a>]
</p>
<h3>Creation/Display Examples</h3>
<blockquote>
<b>surface</b>
<br>
- display the surface of each biopolymer chain in each model
<br><br>
<b>surface #1</b>
<br>
- display the surface of each biopolymer chain in model 1
<br><br>
<b>surface #1:5-38</b>
<br>
- display the surface patch(es) for residues 5-38 in each chain of model 1
<br><br>
<b>surface hide #1/A:5-38</b>
<br>
- hide the surface patch(es) for residues 5-38 in chain A of model 1
<br><br>
<b>surface :10-20 visible 1</b>
<br>
- display the largest surface patch for residues 10-20 in each chain
<br><br>
<b>surface close /b</b>
<br>
- close (delete) the surface model for chain B
<br><br>
<b>surface close #1.2</b>
<br>
- close (delete) the surface with model number 1.2
<br><br>
<!-- zones not yet implemented
<b>surface ligand @<=5 visible 1</b>
- display the largest surface patch per biopolymer chain for
atoms within 5&Aring; of <a href="atomspec.html#builtin"><b>ligand</b></a>
-->
<b>surface ligand</b>
<br>
- display surface(s) for <a href="atomspec.html#builtin"><b>ligand</b></a>
(divided up by chain ID)
<br><br>
<b>surface #1-3</b>
<br>
- display the surface of each biopolymer chain in models 1-3
<br><br>
<b>surface #1-3 enclose #1-3</b>
<br>
- display a single surface enclosing all biopolymer chains in models 1-3;
the first <b>#1-3</b> could be omitted,
as a blank specification there is interpreted as &ldquo;all&rdquo; 
<br><br>
<b>surface :10-20 enclose /a-c</b>
<br>
- display the surface patch(es) for residues 10-20 within a single surface
that encloses chains A-C
<br><br>
<b>surface #1 include :hem</b>
<br>
- display a surface that encloses each biopolymer chain in model 1 along
with its respective HEM residue (for example, in PDB
<a href="http://www.rcsb.org/pdb/explore/explore.do?structureId=4hhb"
target="_blank">4HHB</a>)
<br><br>
<b>surface enclose #1 include :hem</b>
<br>
- display a single surface that encloses all the biopolymer chains 
and HEM residues in model 1
</blockquote>

<a name="style"></a>
<p class="nav">
[<a href="#top">back to top</a>]
</p>
<h3>Surface Style</h3>
<blockquote><a href="usageconventions.html"><b>Usage</b></a>:
<b>surface style</b>
&nbsp;<a href="atomspec.html#othermodels"><i>surf-model</i></a>&nbsp;
(&nbsp;<b>solid</b>&nbsp;|&nbsp;<b>mesh</b>&nbsp;|&nbsp;<b>dot</b>&nbsp;)
</blockquote>
<p>
The representation of a surface model can be <b>solid</b>,
<b>mesh</b>, or <b>dot</b>.
See also: <a href="transparency.html"><b>transparency</b></a>
</p>

<a name="sop"></a>
<p class="nav">
[<a href="#top">back to top</a>]
</p>
<h3>Surface Operations (Editing)</h3>
<p>
Surface operations apply to surface models in general, including
<a href="../tools/volumeviewer.html">volume</a> isosurfaces.
See also: <a href="volume.html#vop"><b>volume</b> operations</a>
</p>
<ul>
<li><a href="#dust"><b>surface dust</b></a>
- hide small blobs (disconnected parts)
<li><a href="#zone"><b>surface zone</b></a>
- show only surface parts within a cutoff distance of specified atoms
</ul>

<a href="#sop" class="nounder">&bull;</a>
  <a name="dust"><b>surface dust</b></a> &nbsp;<i>surf-model(s)</i>&nbsp;
  <b>size</b>&nbsp;<i>s</i>&nbsp;
[&nbsp;<b>metric</b>&nbsp;&nbsp;<b>size</b>&nbsp;|&nbsp;area&nbsp;|&nbsp;volume&nbsp;|&nbsp;&lsquo;size&nbsp;rank&rsquo;&nbsp;|&nbsp;&lsquo;area&nbsp;rank&rsquo;&nbsp;|&nbsp;&lsquo;volume&nbsp;rank&rsquo;&nbsp;]
<blockquote>
Hide smaller blobs (disconnected parts) of a surface, 
such as to simplify the display of noisy density.
The cutoff <b>size</b> for hiding must be specified; blobs smaller
than <i>s</i> will be hidden, where the units depend on the <b>metric</b>:
  <ul>
  <li><b>size</b> (default) - bounding box dimension (largest of X, Y, Z)
  <li><b>area</b> - surface area
  <li><b>volume</b> - enclosed volume
  <li><b>size rank</b> - rank by largest <b>size</b> 
  (a value of <i>N</i> indicates
  showing the <i>N</i> largest blobs by the <b>size</b> criterion)
  <li><b>area rank</b> - rank by largest <b>area</b> 
  <li><b>volume rank</b> - rank by largest <b>volume</b> 
  </ul>
Size measurements will include any blob parts that have been undisplayed
or hidden by <a href="#zone">zoning</a> or <a href="clip.html">clipping</a>,
and blobs at or above the cutoff size will be displayed completely
(although possibly still clipped) even if they had been hidden beforehand.
</blockquote>

<a href="#sop" class="nounder">&bull;</a>
<a name="zone"><b>surface zone</b></a> &nbsp;<i>surf-model(s)</i>&nbsp;
  <b>nearAtoms</b>&nbsp;&nbsp;<a href="atomspec.html"><i>atom-spec</i></a>&nbsp;
  [&nbsp;<b>range</b>&nbsp;<i>radius</i>&nbsp;]
  [&nbsp;<b>maxComponents</b>&nbsp;<i>N</i>&nbsp;]
  [&nbsp;<b>bondPointSpacing</b>&nbsp;<i>s</i>&nbsp;]
<blockquote>
Show only parts of the surface(s) within <i>radius</i> 
(default <b>2.0</b> &Aring;) of
any atom in <a href="atomspec.html"><i>atom-spec</i></a>.
If <b>bondPointSpacing</b> is specified, use points 
spaced <i>s</i> &Aring; apart along bonds
in addition to the atoms to define the zone.
The <b>maxComponents</b> option indicates hiding all but
the <i>N</i> largest connected surface patches in the zone; 
by removing the visual clutter of small patches,
this can significantly enhance viewing of pocket surfaces.
Ranking to determine the largest is based on maximum dimension 
(along X, Y, or Z for a given patch), <i>including</i> any portions
within the zone that are hidden by <a href="clip.html">clipping</a>.
If <b>maxComponents</b> is not supplied, all patches within the zone
will be shown. See also: <a href="select.html"><b>select zone</b></a>
</blockquote>

<a name="notes"></a>
<p class="nav">
[<a href="#top">back to top</a>]
</p>
<h3>Technical Notes</h3>
<p>
<b>Model numbers</b>.
Molecular surface models are treated as &ldquo;children&rdquo; 
of the corresponding atomic model.
For example, surface models based on atoms in model #1 
will be numbered #1.1, 1.2, <i>etc.</i>, 
and closing #1 will also close those surface models.
However, if a single surface model is based on atoms from more than one model
(for example, generated with <b>surf enclose #1,2</b>), it will be assigned 
a number at the same level as the atomic models (for example, #3).
</p><p>
<b>Patch boundaries</b>. 
Per-atom surface patch boundaries are defined by associating each 
surface point with an atom.
In a solvent-excluded surface, each point is associated with the atom with
the smallest distance normalized by radius (the atom with the
smallest <i>d</i>/<i>r</i>, where <i>d</i> is the distance between the 
surface point and the atom center, and <i>r</i> is the atomic 
<a href="../radii.html">VDW radius</a>).
In a Gaussian surface, each point is simply associated with the closest
atomic center.
</p>

<hr>
<address>UCSF Resource for Biocomputing, Visualization, and Informatics / 
May 2017</address>
</body></html>
