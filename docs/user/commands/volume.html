<html>

<!--
=== UCSF ChimeraX Copyright ===
Copyright 2016 Regents of the University of California.
All rights reserved.  This software provided pursuant to a
license agreement containing restrictions on its disclosure,
duplication and use.  For details see:
http://www.rbvi.ucsf.edu/chimerax/docs/licensing.html
This notice must be embedded in or attached to all copies,
including partial copies, of the software or any revisions
or derivations thereof.
=== UCSF ChimeraX Copyright ===
-->

<head>
<link rel="stylesheet" type="text/css" href="../userdocs.css" />
<title>Command: volume</title>
</head><body>

<a name="top"></a>
<a href="../index.html">
<img width="60px" src="../ChimeraX-docs-icon.svg" alt="ChimeraX docs icon"
class="clRight" title="User Guide Index"/></a>

<h3><a href="../index.html#commands">Command</a>: volume</h3>

<h3><a href="usageconventions.html">Usage</a>:
<br><b>volume</b> &nbsp;<a href="atomspec.html"><i>model-spec</i></a>
&nbsp;<a href="#options"><i>options</i></a></h3>
<p>
The <b>volume</b> command controls the display of density maps and
other <a href="../tools/volumeviewer.html">volume data</a>, 
<i>i.e.</i>, values associated with points on a 3D grid.
The <a href="atomspec.html"><i>model-spec</i></a> can be a specific model
number or range of model numbers (preceded by #),
or the word <b>all</b> to indicate all volume models.
</p><p>
The corresponding graphical interface,
<a href="../tools/volumeviewer.html"><b>Volume Viewer</b></a>,
allows adjusting contour levels and some of the other settings
interactively.  Volume data can be opened with the command
<a href="open.html"><b>open</b></a> (which automatically starts 
<a href="../tools/volumeviewer.html"><b>Volume Viewer</b></a>)
and saved to a file with <a href="save.html"><b>save</b></a>.
See also:
<a href="show.html"><b>show</b></a>,
<a href="color.html"><b>color</b></a>,
<a href="transparency.html"><b>transparency</b></a>,
<a href="vop.html"><b>vop</b></a>,
<a href="vseries.html"><b>vseries</b></a>,
<a href="molmap.html"><b>molmap</b></a>,
<a href="fitmap.html"><b>fitmap</b></a>,
<a href="surface.html#sop"><b>surface</b> operations</a>,
<a href="sym.html"><b>sym</b></a>,
<a href="smoothlines.html"><b>smoothlines</b></a>,
<a href="../tools/densitymaps.html"><b>Density Map Toolbar</b></a>
</p>
<a name="examples">Examples</a>:
<blockquote>
<b>volume #1 style mesh level 0.8 color red level 1.2 color 0,50,80</b>
<br>
<b>volume #2 level 10,0 level 100,1 level 400,1 color hot pink style solid</b>
<br>
<b>vol all hide</b>
</blockquote>
<a name="options"></a>
The <b>volume</b> command has many options, here grouped into categories:
<blockquote>
<a href="#general">General Display Options</a>
<a href="../tools/densitymaps.html" title="Density Map Toolbar...">
<img class="icon" border=1 src="../tools/shortcut-icons/showmap.png"></a>
<a href="../tools/densitymaps.html" title="Density Map Toolbar...">
<img class="icon" border=1 src="../tools/shortcut-icons/hidemap.png"></a>
<a href="../tools/densitymaps.html" title="Density Map Toolbar...">
<img class="icon" border=1 src="../tools/shortcut-icons/mapsurf.png"></a>
<a href="../tools/densitymaps.html" title="Density Map Toolbar...">
<img class="icon" border=1 src="../tools/shortcut-icons/mesh.png"></a>
<a href="../tools/densitymaps.html" title="Density Map Toolbar...">
<img class="icon" border=1 src="../tools/shortcut-icons/mapimage.png"></a>
<br><a href="#sampling">Sampling and Size Options</a>
<a href="../tools/densitymaps.html" title="Density Map Toolbar...">
<img class="icon" border=1 src="../tools/shortcut-icons/step1.png"></a>
<a href="../tools/densitymaps.html" title="Density Map Toolbar...">
<img class="icon" border=1 src="../tools/shortcut-icons/step2.png"></a>
<br><a href="#dimensions">Dimension and Scale Options</a>
<br><a href="#planes">Planes Options</a>
<br><a href="#dispsurf">Surface and Mesh Display Options</a>
<br><a href="#dispsolid">Solid Display Options</a>
</blockquote>
<p>
Option keywords and Boolean (truth) values can be truncated, with
synonyms for true: True, 1, and synonyms for false: False, 0.
A vertical bar &ldquo;|&rdquo; designates mutually exclusive values, and
default settings are indicated with <b>bold</b>.
</p>

<h4><a href="#top" class="nounder"><b>&larr;</b></a>
<a name="general">General Display Options</a>
&nbsp;&nbsp;&nbsp;
(Usage:&nbsp;<a href="#top">volume</a>&nbsp;&nbsp;<i>model-spec</i>&nbsp;&nbsp;<i>options</i>)</h4>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <b>show</b>
  <br>Display the volume model.
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <b>hide</b>
  <br>Undisplay the volume model.
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <b>toggle</b>  
  <br>
  Of the specified volume models,
  show those that are hidden and hide those that are shown.
</blockquote>
<blockquote>
<!-- need to change section heading and vseries docs if solid becomes image -->
  <a href="#top" class="nounder">&bull;</a>
  <a name="style"><b>style</b> surface | mesh | solid</a>
  <br>Designate the style of display:
  the <b>surface</b> and <b>mesh</b> modes
  depict isosurfaces (contour surfaces), while the <b>solid</b> mode
  shows data as a semitransparent solid.
</blockquote>
Separate sets of <a href="#level">level</a>, <a href="#color">color</a>,
<a href="#brightness">brightness</a>, and 
<a href="#transparency">transparency</a> information
are maintained for the surface/mesh and solid styles of a volume model;
switching to solid from surface or mesh (or <i>vice versa</i>) restores 
any previous assignments for that style.
See also: <a href="#dispsurf">surface and mesh display options</a>,
<a href="#dispsolid">solid display options</a>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="level"><b>level</b> <i>threshold-level</i></a>
  <br>Place a <b><i>threshold</i></b>
  for mapping data values to the display. Can be given multiple times
  in the same command for multiple contour levels on the same volume data.
  <ul class="circle">
  <li>For <b>surface</b> and <b>mesh</b> displays, <i>threshold-level</i> is 
  a single number, the contour level of the surface.  
  This corresponds to horizontal placement on a histogram in the
  graphical interface.
  To adjust the threshold level automatically so that the contour
  encloses a specified spatial volume,
  see the <a href="#encloseVolume"><b>encloseVolume</b></a>
  and <a href="#fastEncloseVolume"><b>fastEncloseVolume</b></a> options.
  <li>For <b>solid</b> displays, <i>threshold-level</i> consists of two numbers 
  separated by a comma (no spaces). The first number indicates a data value
  and the second number indicates an intensity ranging from 0.0 to 1.0.
  These correspond to horizontal and vertical placement, respectively, 
  on a histogram in the graphical interface.
  </ul>
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="rmsLevel"><b>rmsLevel</b> <i>threshold-level</i></a>
  <br>
  <a href="#top" class="nounder">&bull;</a>
  <a name="sdLevel"><b>sdLevel</b> <i>threshold-level</i></a>
  <br>
  Same as <a href="#level"><i>level</i></a>, except with <i>threshold-level</i>
  specified in units of root-mean-square (RMS) deviations from zero
  or standard deviations (SD) from the mean, respectively, 
  calculated for the <a href="#dimensions">current display region</a>
  and <a href="#sampling">step size</a>.
  See also: <a href="vop.html#scale"><b>vop scale</b></a>
<!--
  <a href="measure.html#mapStats"><b>measure mapStats</b></a>
-->
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="color"><b>color</b> <i>threshold-color</i></a>
  <br>Assign <a href="#level">threshold</a> color. Can be given multiple times
  in the same command if multiple <a href="#level">threshold levels</a> 
  are also specified.
  The <i>threshold-color</i> can be any
  <a href="colornames.html">color name</a> that specifies a single color.
  The default color is an opaque medium gray (<b>70,70,70</b>) 
  for surface and mesh displays, <b>white</b> for solid.
</blockquote>
Multiple <a href="#level">level</a> and <a href="#color">color</a>
specifications can be included in a single command.
If a color is specified but no levels, the color applies to all existing 
levels and becomes the default color for the volume model.  
If levels are given but no color, the model's current default color is used 
for the levels, and all old levels are removed.  
If one color and one or more levels are given, that color applies to all 
levels but does not become the default color.  Otherwise,
if multiple levels and colors are given, there must be an equal number of each.
Levels and colors are paired in the order given,
but they do not need to be interleaved; 
only the ordering of each type of specification (levels or colors)
is significant.
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="encloseVolume"><b>encloseVolume</b> <i>volume</i></a>
  <br>Automatically set <b>surface</b> or <b>mesh</b>
  <a href="#level">threshold level</a> to enclose
  the specified <i>volume</i> in distance units cubed (<i>e.g.</i>, 
  &Aring;<sup>3</sup> if the grid spacing is expressed in &Aring;). 
  Multiple volume models can be specified in the same command to make their
  isosurfaces enclose the same spatial volume. 
  The level is determined by an iterative procedure. In each iteration,
  the density value midway between the upper and lower bounds is tested.
  If the resulting enclosed volume is larger (smaller) than the target, 
  that midpoint value becomes the new lower (upper) bound.
  In the first iteration, the upper and lower bounds are the maximum
  and minimum values in the map.  Iteration stops when the
  actual enclosed volume differs from the target by less than 
  0.001 of the target or 30 iterations have been performed.
  The <a href="#fastEncloseVolume"><b>fastEncloseVolume</b></a> option
  is similar but uses a noniterative approximation.
  See also: 
  <a href="vseries.html#align"><b>vseries align</b></a>
<!--
<a href="measure.html#volume"><b>measure volume</b></a>,
-->
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="fastEncloseVolume"><b>fastEncloseVolume</b> <i>volume</i></a>
  <br>Automatically set <b>surface</b> or <b>mesh</b>
  <a href="#level">threshold level</a> to enclose
  the specified <i>volume</i> in distance units cubed (<i>e.g.</i>, 
  &Aring;<sup>3</sup> if the grid spacing is expressed in &Aring;). 
  Multiple volume models can be specified in the same command to make their
  isosurfaces enclose the same spatial volume.
  The number of grid points to enclose is estimated by dividing the target
  volume by the volume of one grid cell, and then the level corresponding
  to that number of points is estimated by sorting the data values into
  10,000 bins of equal width and identifying the value bin that attains
  (cumulatively) that number of points.
  The <a href="#encloseVolume"><b>encloseVolume</b></a> option
  is similar but uses an iterative procedure with increased accuracy
  at the cost of increased computation time.
  See also: 
  <a href="vseries.html#align"><b>vseries align</b></a>
<!--
<a href="measure.html#volume"><b>measure volume</b></a>,
-->
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="brightness"><b>brightness</b> <i>value</i></a> 
  <br>Brightness scales the intensity of the color of the display.  Values
  can range from 0.01 to 10.0, where <b>1.0</b> (the default) produces no change
  relative to the <a href="#color">specified colors</a>.
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="transparency"><b>transparency</b> <i>value</i></a>
  <br>Transparency values range from 0.0 (fully opaque) 
  to 1.0 (fully transparent).
  <ul class="circle">
  <li>For <b>surface</b> and <b>mesh</b> displays, transparency
  is the fraction of light transmitted from behind the surface or a
  line of mesh (default <b>0.0</b>).  By default,
  these objects are dimmed as they are made more transparent
  (see <a href="#dim"><b>dimTransparency</b></a>.)
  <li>For <b>solid</b> displays, this transparency setting
  further modulates initial transparencies obtained from the 
  <a href="#transferfunction">transfer function</a>
  in a way that compensates for the thickness of the display
  (<a href="#soliddetails">details</a>).
  Values range from 0.0 (no modulation) to 1.0, default <b>0.5</b>.
  By default, more transparent voxels are made dimmer
  (see <a href="#dimvox"><b>dimTransparentVoxels</b></a>).
  </ul>
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="outline"><b>showOutlineBox</b> &nbsp;true | <b>false</b></a>
  <br>Outline the bounding box of the 
  <a href="#dimensions">current display region</a>.
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <b>outlineBoxRgb</b> <i>outline-color</i>
  <br>Assign a color to the <a href="#outline">outline box</a>.
  The <i>outline-color</i> can be any
  <a href="colornames.html">color name</a> that specifies a single color.
  Any transparency in the color will be ignored.
  The default color is <b>white</b>.
</blockquote>

<h4><a href="#top" class="nounder"><b>&larr;</b></a>
<a name="sampling">Sampling and Size Options</a>
&nbsp;&nbsp;&nbsp;
(Usage:&nbsp;<a href="#top">volume</a>&nbsp;&nbsp;<i>model-spec</i>&nbsp;&nbsp;<i>options</i>)</h4>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="step"><b>step</b> <i>N</i> | <i>Nx,Ny,Nz</i></a>
  <br>Step values indicate sampling density; a step of 1 
  means all data points are used to generate the display, 
  while 2 means every other data point is taken along each axis.
  Step sizes must be integers.  If a single number is supplied, it is
  used in all three directions; if three numbers are supplied
  (separated by commas but not spaces), they
  are used in the X, Y, and Z directions, respectively.
  Changing a step value will change the data size limit for automatic 
  step adjustment (see <a href="#voxmax"><b>voxelLimit</b></a>).
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="autostep"><b>limitVoxelCount</b> &nbsp;<b>true</b> | false</a>
  <br>Automatically adjust <a href="#step">step size</a> so that no more
  than the <a href="#voxmax">specified voxel limit</a> is displayed.
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="voxmax"><b>voxelLimit</b> <i>limit</i></a>
  <br>Set the maximum number of Mvoxels to be displayed (default <b>1.0</b>)
  when <a href="#autostep"><b>limitVoxelCount</b></a> is set to true.
</blockquote>
The remaining options in this section apply to all volume models, 
regardless of which are specified:
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="dispopen"><b>showOnOpen</b> &nbsp;<b>true</b> | false</a>
  <br>Automatically display a data set when it is opened if it does not
  exceed a <a href="#dispsize">specified size</a>.
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="dispsize"><b>voxelLimitForOpen</b> <i>size</i></a> 
  <br>Set the data size limit in Mvoxels below which data should be
  automatically displayed when opened (default <b>256.0</b>) when
  <a href="#dispopen"><b>showOnOpen</b></a> is set to true.
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="dispplane"><b>showPlane</b> &nbsp;<b>true</b> | false</a>
  <br>Initially display just a single plane (normal to the Z axis) 
  of a data set if it exceeds a <a href="#planesize">specified size</a>.
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="planesize"><b>voxelLimitForPlane</b> <i>size</i></a>
  <br>Set the data size limit in Mvoxels above which a single plane of
  the data should be initially displayed (default <b>256.0</b>) when
  <a href="#dispplane"><b>showPlane</b></a> is set to true.
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <b>dataCacheSize</b> <i>size</i>
  <br>Set how much memory in Mb should be dedicated to volume data 
  (default <b>512</b>).  A cache can improve performance, since accessing 
  cached data is faster than reading it from disk. 
  The least recently displayed data values are purged to maintain the specified
  <i>size</i>. The data cache only accounts for approximately 1/3 to 1/2
  of the memory used in viewing volume data, as additional memory is 
  occupied by surfaces and color arrays.
</blockquote>

<h4><a href="#top" class="nounder"><b>&larr;</b></a>
<a name="dimensions">Dimension and Scale Options</a>
&nbsp;&nbsp;&nbsp;
(Usage:&nbsp;<a href="#top">volume</a>&nbsp;&nbsp;<i>model-spec</i>&nbsp;&nbsp;<i>options</i>)</h4>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <b>region</b> all | <i>name</i> | <i>i1,j1,k1,i2,j2,k2</i>
  <br>Show the full data set (specified with <b>all</b>), 
  or the data region previously <a href="#name">assigned</a>
  <i>name</i>, or the data region with grid indices 
  <i>i1&ndash;i2</i> along the X axis,
  <i>j1&ndash;j2</i> along the Y axis, and
  <i>k1&ndash;k2</i> along the Z axis.  
  Grid indices must be integers separated by commas but not spaces.
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="name"><b>nameRegion</b> <i>name</i></a>
  <br>Assign <i>name</i> to the currently displayed region.
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="origin"><b>origin</b> <i>x,y,z</i></a>
  <br>Place the grid origin at coordinates <i>x,y,z</i> (numbers separated
  by commas but not spaces).
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="originIndex"><b>originIndex</b> <i>i,j,k</i></a>
  <br>Place the coordinate origin (0,0,0)
   at grid indices <i>i,j,k</i> (numbers separated by commas but not spaces).
   Fractional and negative values are allowed, as the origin is not 
   required to coincide with a grid point or even to fall within the grid.
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="scale"><b>voxelSize</b> <i>S</i> | <i>Sx,Sy,Sz</i></a>
  <br>Voxel size indicates the scale of the data set, the spacing of
  points in units of distance.  If a single number is supplied, it is
  used in all three directions; if three numbers are supplied 
  (separated by commas but not spaces), they
  are used in the X, Y, and Z directions, respectively.
  The grid is anchored at the coordinate origin 
  (<a href="#originIndex"><b>originIndex</b></a> remains unchanged).
</blockquote>

<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="symmetry"><b>symmetry</b> <i>sym-type</i></a>
  <br>Assign the specified symmetry to the volume data set.
  This information is retained in files <a href="save.html">saved</a> 
  in <a href="save.html#chimap">Chimera map</a> format and can be used by 
  other commands such as <a href="molmap.html"><b>molmap</b></a>
  and <a href="fitmap.html"><b>fitmap</b></a>.
<!--
  For automatic symmetry detection and assignment, see the command 
  <a href="measure.html#symmetry"><b>measure symmetry</b></a>.
-->
  Most <i>sym-type</i> options have additional sub-options or parameters:
  <ul>
  <li>symmetry of model <b>#<i>N</i></b>
  - use &ldquo;biological assembly&rdquo; information from an atomic
  model (currently only read from PDB format, not mmCIF)
  or the symmetry assignment of another volume model
    <ul type="none">
    <li>Example: <b>#4</b>
    </ul>

  <li>cage model (from <b>Cage Builder</b>) polygon symmetry
  <b>#<i>N</i>,p<i>M</i></b> or <b>#<i>N</i>,pn<i>M</i></b>
  - place copies at equivalent positions relative to each M-sided polygon
  in the cage model with ID number <b>N</b>. The <b>p<i>M</i></b> form places
  one copy per M-sided polygon, whereas <b>pn<i>M</i></b> places M copies per
  M-sided polygon using C<font size=-1><i>M</i></font> symmetry about the center
  of the M-sided polygon nearest the original copy.
    <ul type="none">
    <li>Examples: <b>#2,p6</b> or <b>#2,pn5</b>
    </ul>

 <li>cyclic symmetry <b>C<i>n</i></b>
   around <a href="#axis">axis</a> and <a href="#center">center</a>
    <ul type="none">
    <li>Example: <b>C3</b>
    </ul>

  <li>dihedral symmetry <b>D<i>n</i></b>
   around <a href="#axis">axis</a> and <a href="#center">center</a>
    <ul type="none">
    <li>Example: <b>d7</b>
    </ul>

  <li>tetrahedral symmetry <b>T[,<i>orientation</i>]</b>
   around <a href="#center">center</a>
    <ul type="none">
    <li>Example: <b>t,z3</b>
    </ul>
   where <i>orientation</i> can be:
   <ul>
   <li><b>222</b> (default)
   - with two-fold symmetry axes along the X, Y, and Z axes, a three-fold
    along axis (1,1,1)
   <li><b>z3</b> - a three-fold symmetry axis along Z, another three-fold
   axis in the YZ plane such that rotation about the X axis by ~110&deg; is a
   symmetry operation (EMAN convention)
   </ul>

  <li>octahedral symmetry <b>O</b> around <a href="#center">center</a>

  <li>icosahedral symmetry <b>I[,<i>orientation</i>]</b>
   around <a href="#center">center</a>
    <ul type="none">
    <li>Example: <b>i,n25</b>
    </ul>
   where <i>orientation</i> can be:
    <ul>
    <li><b>222</b> (default)
    - with two-fold symmetry axes along the X, Y, and Z axes
    <li><b>2n5</b> - with two-fold symmetry along X and 5-fold along Z
    <li><b>n25</b> - with two-fold symmetry along Y and 5-fold along Z
    <li><b>2n3</b> - with two-fold symmetry along X and 3-fold along Z
    <li><b>222r</b> - same as 222 except rotated 90&deg; about Z
    <li><b>2n5r</b> - same as 2n5 except rotated 180&deg; about Y
    <li><b>n25r</b> - same as n25 except rotated 180&deg; about X
    <li><b>2n3r</b> - same as 2n3 except rotated 180&deg; about Y
    </ul>

  <li>helical symmetry
  <b>H,<i>rise,angle,n</i>[,<i>offset</i>]</b>
  around <a href="#axis">axis</a> and <a href="#center">center</a>
    <ul type="none">
    <li>Example: <b>h,43.5,21,6,-2</b>
    </ul>
  where <i>rise</i> is the translation along the <a href="#axis">axis</a> per
  subunit, <i>angle</i> is the rotation in degrees per subunit,
  and <i>n</i> is how many copies total (including the original)
  the resulting segment of infinite helix should contain.
  The integer <i>offset</i> (default <b>0</b>) allows extending the helix in
  both directions.  The example above would give <i>n</i> = 6 copies total,
  with two copies in the negative axis direction,
  one at the identity position, and three in the positive axis direction.

  <li>translational symmetry
  <b>shift,<i>n,distance</i></b> along <a href="#axis">axis</a>
  &ndash; or &ndash; <b>shift,<i>n,x,y,z</i></b>
    <ul type="none">
    <li>Example: <b>shift,3,26.7</b>
    </ul>
  where <i>n</i> is how many copies total (including the original)
  the result should contain.
  The translation can be expressed as a
  <i>distance</i> along the <a href="#axis">axis</a>
  or as a vector <i>x,y,z</i> in the
  <a href="#coordinateSystem">reference coordinate system</a>.

  <li>the product of symmetry groups, each specified as described above
  and separated by <b>*</b> to indicate multiplying each symmetry matrix of one
  group with each symmetry matrix of another; can be generalized to
  multiple symmetry groups (not just two)
    <ul type="none">
    <li>Example: <b>c2*h,42,21,9,-4</b>
    </ul>
  </ul>
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="axis"><b>axis</b> <i>axis</i></a>
  <br>
  Specify axis of symmetry (default <b>z</b>), where <i>axis</i> can be:
   <ul>
   <li><b>x</b> - X-axis
   <li><b>y</b> - Y-axis
   <li><b>z</b> - Z-axis
   <li><i>x,y,z</i>
   (three values separated by commas only) - an arbitrary vector
   in the <a href="#coordinateSystem">reference coordinate system</a>
  <li>an <a href="atomspec.html"><i>atom-spec</i></a> of
   exactly two atoms (not necessarily bonded or in the same model) 
<!-- or one bond.
   A bond can only be specified by <a href="../selection.html">selecting</a>
   it and using the word <b>sel</b>;
   any atoms also selected at the time will be ignored.
-->
  </ul>
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="center"><b>center</b> <i>center</i></a>
  <br>
  Specify center of symmetry in physical coordinates (default <b>0,0,0</b>),
  where <i>center</i> can be:
  <ul>
  <li><i>x,y,z</i>
   (three values separated by commas only) - an arbitrary point
  in the <a href="#coordinateSystem">reference coordinate system</a>
  <li>an <a href="atomspec.html"><i>atom-spec</i></a>
  of any combination of atoms and surface models.
  The center of the bounding sphere of the specified items will be used.
  </ul>
  This option is overridden by <a href="#centerIndex"><b>centerIndex</b></a>.
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="centerIndex"><b>centerIndex</b>
  [&nbsp;<i>i</i>&nbsp;|&nbsp;<i>i,j,k</i>&nbsp;]</a>
  <br>
  Specify center of symmetry in grid coordinates, given as a single 
  value or three values separated by commas only.
  Fractional and negative values can be used.  If a single value is given, 
  it is used as the grid coordinate along all three axes.
  This option overrides <a href="#center"><b>center</b></a>.
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="coordinateSystem"><b>coordinateSystem</b> <i>N</i></a>
  <br>
  Specify a reference model by model number <i>N</i> preceded by #.
  The reference coordinate system is used for interpreting specifications of
  <a href="#axis">axis</a> and <a href="#center">center</a> of symmetry.
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="dump"><b>dumpHeader</b> &nbsp;true | <b>false</b></a>
  <br>Write the file header contents (if any) of a map read from 
  MRC or CCP4 format to the <a href="../tools/log.html"><b>Log</b></a>.
</blockquote>

<h4><a href="#top" class="nounder"><b>&larr;</b></a>
<a name="planes">Planes Options</a>
&nbsp;&nbsp;&nbsp;
(Usage:&nbsp;<a href="#top">volume</a>&nbsp;&nbsp;<i>model-spec</i>&nbsp;&nbsp;<i>options</i>)</h4>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <b>planes</b> <i>axis</i>,<i>start</i>[,<i>end</i>[,<i>increment</i>[,<i>depth</i>]]]
  <br>Sequentially display slabs <i>depth</i> planes thick along the
  specified data <i>axis</i> (<b>x</b>,<b>y</b>, or <b>z</b>) starting from
  index <i>start</i> and repositioning the slab by <i>increment</i> 
  grid units per frame until the index at the next frame would 
  exceed <i>end</i>.  
  The indices refer to the first displayed plane along the axis.
  If no <i>end</i> is supplied, only a single slab will be shown.  
  The default <i>increment</i> and <i>depth</i> are both <b>1</b>.
  Only planes that are multiples of the <a href="#step">step size</a>
  will be shown, and the <i>depth</i> refers to the number of planes
  shown rather than a grid index range.
  Although an <i>increment</i> smaller than the step size can be specified, 
  at each frame the grid index will be rounded down to a 
  multiple of the step size, resulting in the same plane being displayed in
  more than one frame.  To avoid this, change the step size to 1 beforehand
  or specify <i>start</i>, <i>end</i> and <i>increment</i> values
  consistent with the current step size. The <i>start</i>, <i>end</i>,
  <i>increment</i>, and <i>depth</i> parameters can be floating-point numbers.
  For example, an <i>increment</i> of 0.25 with step size 1 will show each
  plane for 4 frames.
<!--
  See the
  <a href="http://www.cgl.ucsf.edu/chimera/data/movie-howto-mar2012/movie_examples.html#planes"
  target="_blank">video mini-example</a>.
  See also: <a href="vop.html#tile"><b>vop tile</b></a>
-->
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="expandSinglePlane"><b>expandSinglePlane</b>&nbsp;&nbsp;true&nbsp;|&nbsp;false</a>
  <br>
  Expand a single-plane display
  along its perpendicular axis to the full thickness of the data.
  This option does not apply to <a href="#orthoplanes">orthogonal planes</a>.
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="orthoplanes"><b>orthoplanes</b></a>
  xyz&nbsp;|&nbsp;xy&nbsp;|&nbsp;yz&nbsp;|&nbsp;xz&nbsp;|&nbsp;off
  [&nbsp;<b>positionPlanes</b>&nbsp;<i>i,j,k</i>&nbsp;]
  <br>Display planes perpendicular to the X, Y, and/or Z data axes
  within the <a href="#dimensions">current region</a>.
  If only a single plane is shown beforehand, it will be
  <a href="#expandSinglePlane">expanded</a> to define the region.
  The <b>positionPlanes</b> option specifies plane locations along the axes 
  by integer grid indices (default <b>0,0,0</b> or the lowest indices in the
  <a href="#dimensions">current region</a>).
  Orthogonal planes automatically use the 
  <b>solid</b> <a href="#style">display style</a>,
  opaque <a href="#dispsolid">color mode</a>, 
  and an <a href="#outline">outline</a>, 
  although these can be overriden with the corresponding command options. 
  Turning orthogonal planes <b>off</b> restores the <b>auto8</b>
  <a href="#dispsolid">color mode</a>.
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <b>boxFaces</b>&nbsp;&nbsp;true&nbsp;|&nbsp;false
  <br>Display orthogonal planes as the six box faces of the
  <a href="#dimensions">current region</a>.
  If only a single plane is shown beforehand, it will be
  <a href="#expandSinglePlane">expanded</a> to define the region.
  Box-face planes automatically use the
  <b>solid</b> <a href="#style">display style</a>,
  opaque <a href="#dispsolid">color mode</a>,   
  and an <a href="#outline">outline</a>,
  although these can be overriden with the corresponding command options.
  Turning box-face planes <b>off</b> restores the <b>auto8</b>
  <a href="#dispsolid">color mode</a>.
</blockquote>

<h4><a href="#top" class="nounder"><b>&larr;</b></a>
<a name="dispsurf">Surface and Mesh Display Options</a>
&nbsp;&nbsp;&nbsp;
(Usage:&nbsp;<a href="#top">volume</a>&nbsp;&nbsp;<i>model-spec</i>&nbsp;&nbsp;<i>options</i>)</h4>
<p>
The <b>surface</b> and <b>mesh</b> <a href="#style">display styles</a>
both depict isosurfaces.
</p>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="smoothing"><b>surfaceSmoothing</b> &nbsp;true | <b>false</b></a>
  <br>Whether to smooth surface and mesh displays.
  Smoothing entails moving each vertex
  a <a href="#smoothfact">specified fraction</a> 
  of the way toward the average position of its neighbors
  a <a href="#smoothiter">specified number</a> of times.
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="smoothiter"><b>smoothingIterations</b> <i>N</i></a>
  <br>How many iterations of smoothing to perform (default <b>2</b>)
  when <a href="#smoothing"><b>surfaceSmoothing</b></a> is set to true.
  Each vertex is moved once per iteration.
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="smoothfact"><b>smoothingFactor</b> <i>f</i></a>
  <br>How far to move each vertex 
  when <a href="#smoothing"><b>surfaceSmoothing</b></a> is set to true.
  In each <a href="#smoothiter">iteration</a>, each vertex
  is moved a fraction <b><i>f</i></b> (ranging from 0.0 to 1.0,
  default <b>0.3</b>) of the way toward the average position of the vertices
  connected to it by triangle edges.
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="subdivide"><b>subdivideSurface</b> &nbsp;true | <b>false</b></a>
  <br>Whether to subdivide each triangle in surface and mesh displays
  into four smaller triangles a
  <a href="#sublevels">specified number</a> of times.
  A triangle is subdivided by connecting the midpoints of its edges.
  Subdivision can help to produce smoother surfaces 
  when combined with the <a href="#smoothing"><b>surfaceSmoothing</b></a> 
  option.
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="sublevels"><b>subdivisionLevels</b> <i>j</i></a>
  <br>How many times to subdivide triangles when
  <a href="#subdivide"><b>subdivideSurface</b></a> is set to true.
  The number of triangles is increased by a factor of 
  4<sup><i>j</i></sup>, where <i>j</i> is a positive integer
  (default <b>1</b>).
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <b>smoothLines</b> &nbsp;true | <b>false</b>
  <br>Turn on anti-aliasing to smooth lines in mesh displays.
  Mesh lines with <a href="#transparency">transparency</a> &gt; 0.0 can 
  only be smoothed when <a href="#dim"><b>dimTransparency</b></a> is true.
  A side effect of OpenGL anti-aliasing is that dense meshes 
 look brighter from some viewpoints and darker from others, depending on the
  order in which the lines were drawn.  
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <b>squareMesh</b> &nbsp;<b>true</b> | false
  <br>Display only a subset of the lines in the triangular mesh.  
  Lines in the square mesh show the intersection of the 
  XY, YZ, and XZ grid planes with the contour surface.
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
 <b>lineThickness</b> <i>width</i>
 <br>Set pixel linewidth used in mesh displays. The <i>width</i>
 must be a positive integer (default <b>1</b>).
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="dim"><b>dimTransparency</b> &nbsp;<b>true</b> | false</a>
  <br>Decrease the brightness of surface and mesh displays as their
  <a href="#transparency">transparency</a> is increased.
  When dimming is on, OpenGL (alpha,1&ndash;alpha)
  blending is used instead of (1,1&ndash;alpha) blending.
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="meshlight"><b>meshLighting</b> &nbsp;<b>true</b> | false</a>
  <br>Make the inside of a mesh-enclosed volume dimmer than the outside
  by varying the brightness according to the angle
  between each surface point normal and the line of sight.
  Brightness is maximal when the outward-facing normal
  is parallel to the line of sight and pointing at the user
  (see more on the definition of &ldquo;outward&rdquo; under 
  <a href="#flip"><b>flipNormals</b></a>).
  When this option is off, brightness is uniform regardless of
  the angle between the normal and the line of sight.
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="two-sided"><b>twoSidedLighting</b> &nbsp;<b>true</b> | false</a>
  <br>Light both sides of surface displays.
  Otherwise, only the outside of a surface-enclosed volume will be lit
  (see more on the definition of &ldquo;outside&rdquo; under 
  <a href="#flip"><b>flipNormals</b></a>).
  The brightness of each lit side varies according to the angle between a
  surface point normal and the line of sight;
  brightness is maximal when the normal is parallel to the line of sight.
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="flip"><b>flipNormals</b> &nbsp;<b>true</b> | false</a>
  <br>Affects surface displays when 
  <a href="#two-sided"><b>twoSidedLighting</b></a> is set to false,
  mesh displays when
 <a href="#meshlight"><b>meshLighting</b></a> is set to true.
  When <b>flipNormals</b> is true,
  the side toward larger or more positive values is treated
  as the outside for negative <a href="#level">thresholds</a>
  and the side toward smaller or more negative values is treated 
  as the outside for positive <a href="#level">thresholds</a>
  (appropriate for data in which the sign is meaningful, 
  such as <a href="open.html#local">electrostatic potential</a>).
  When <b>flipNormals</b> is false,
  the side toward smaller or more negative data
  values is always treated as the outside.
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <b>capFaces</b> &nbsp;<b>true</b> | false
  <br>Cover the faces of the volume data box where high values would be exposed.
</blockquote>

<h4><a href="#top" class="nounder"><b>&larr;</b></a>
<a name="dispsolid">Solid Display Options</a>
&nbsp;&nbsp;&nbsp;
(Usage:&nbsp;<a href="#top">volume</a>&nbsp;&nbsp;<i>model-spec</i>&nbsp;&nbsp;<i>options</i>)</h4>
<p>
  The <b>solid</b> <a href="#style">display style</a>
  shows data as a semitransparent solid.
</p>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <b>colorMode</b> <i>cmode</i>
  <br>Specify color pixel format (OpenGL texture format).
  Possible values of <i>cmode</i> combine 
  a string describing the types of information:
  <ul class="circle">
  <li><b>rgba</b> - multiple colors and transparency
  <li><b>rgb</b> - multiple colors, opaque
  <li><b>la</b> - luminance (single color) and transparency
  <li><b>l</b> - luminance (single color), opaque
  <li><b>auto</b> - set the mode based on the current display
  </ul>
  ... with a number of bits: <b>4</b>, <b>8</b>, <b>12</b>, <b>16</b>.
  For example, the default <i>cmode</i> is <b>auto8</b>. 
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="pmode">
  <b>projectionMode</b> <i>pmode</i></a>
  <br>Specify projection mode for memory-efficient display of 
  large data sets such as tomograms.  Possible values of <i>pmode</i>:
  <ul class="circle">
  <li><b>auto</b> (default)
  <li><b>2d-x</b>
  <li><b>2d-y</b>
  <li><b>2d-z</b>
  <li><b>2d-xyz</b>
  <li><b>3d</b>
  </ul>
  Displaying just the planes perpendicular to one data axis 
  (2d-x, 2d-y, or 2d-z) uses less memory than automatically switching
  to those along the data axis most perpendicular to the screen at a given 
  time (2d-xyz).  The auto setting uses 2d-z for volumes with X or Y dimensions
  at least 4 times greater than Z, otherwise 2d-xyz.
  The 3d option (3D texture mapping) uses planes perpendicular
  to the current line of sight, which may not lie along any data axis.  
  If this option is chosen but not supported by the computer hardware, 
  an empty red outline box will be shown; if it is supported 
  but the texture is too large, an empty yellow outline box will be shown.  
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <b>maximumIntensityProjection</b> &nbsp;true | <b>false</b>
  <br>At each pixel, display the the most intense color value 
  underlying the pixel along the line of sight.
  The maximum intensities of the red, green, and blue color components are
  determined separately, and transparency is ignored.
  This option can be useful for enhancing detail. Unphysical effects
  can result, but are usually not very noticeable; examples include
  the disappearance of a dim spot when it passes in front of a brighter spot
  and the simulation of a single spot when the maximal values of different
  color components under the same pixel actually come from different spots.
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <a name="dimvox"><b>dimTransparentVoxels</b> &nbsp;<b>true</b> | false</a>
  <br>Scale voxel brightness in solid displays
  by a factor of (1&ndash;transparency).
  Otherwise, increasing the transparency also makes a volume
  appear brighter, because less light is blocked.
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <b>btCorrection</b> &nbsp;true | <b>false</b>
  <br>Correct brightness and transparency for the viewing angle.
  Without this correction, the apparent brightness and transparency
  of solid displays (in <a href="#pmode">projection modes</a> other than 3d)
  will depend on the viewing angle relative to the data axes.  
  For a cube-shaped volume with equal resolution in the X, Y, and Z dimensions,
  the brightness drops and the transparency increases by a factor of
  3<sup>1/2</sup> (approximately 1.7)  as the viewing angle is changed
  from along any axis to along the cube diagonal.
  The brightness correction remedies this, but doubles rendering time.
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <b>minimalTextureMemory</b> &nbsp;true | <b>false</b>
  <br>Reuse a single 2D texture for solid displays 
  (in <a href="#pmode">projection modes</a> other than 3d)
  instead of allocating
  separate textures for every plane of the data.  This is useful
  for viewing large data sets that would otherwise fail to display,
  but can degrade interactive response.
</blockquote>
<blockquote>
  <a href="#top" class="nounder">&bull;</a>
  <b>linearInterpolation</b> &nbsp;<b>true</b> | false
  <br>Linearly interpolate brightness and transparency
  between voxels in solid displays.
  Turning interpolation off may yield a pixelated appearance
  but speed up rendering, depending on the graphics hardware.
</blockquote>

<a name="notes"></a>
<p class="nav">
[<a href="#top">back to top</a>]
</p>
<h3>Technical Notes</h3>

<p><a name="transferfunction"><b>Transfer function</b></a>.
The thresholds and connecting lines on each histogram define a 
<b><i>transfer function</i></b> 
that maps data values to colors and intensities.
For each voxel, the data value is compared to the thresholds on the histogram.
The colors and intensities of the closest threshold at a lower data value 
(to the left) and the closest threshold at a higher data value (to the right)
are linearly interpolated. Voxels with data values greater than the rightmost
threshold or less than the leftmost threshold are colorless and completely
transparent. Color is defined by red, green, blue and opacity components.
The intensity at a threshold is further scaled by its vertical position,
where 0 is the bottom of the histogram and 1 is the top. Rendering time
does not depend on the positions of the thresholds, but increases with
greater numbers of thresholds.
</p>

<p><a name="soliddetails"><b>Solid transparency details</b></a>.
For <a href="#dispsolid"><b>solid</b></a> displays,
the <a href="#transferfunction">transfer function</a> maps a
voxel's data value to a vertical position (ranging from 0 to 1)
on the histogram:
<blockquote>
<b>T<sub>histo</sub></b> = (1 &ndash; vertical position)
</blockquote>
If the <a href="#transparency">transparency</a> is zero
(<b>T<sub>set</sub></b> = 0), the voxel will be completely opaque:
<blockquote>
<b>T<sub>final</sub></b> = 0
</blockquote>
Otherwise, the transparency value from the histogram
is modulated by <b>T<sub>set</sub></b>
in a way that depends on the number of data planes displayed:
<blockquote>
<b>T<sub>final</sub></b> = <b>T<sub>histo</sub></b><sup>(<b>T<sub>histo</sub></b>* <b>T<sub>set</sub></b>* thickness) <sup>&ndash;1</sup></sup>
<br><br>
thickness = min(<b>N<sub>x</sub></b>,<b>N<sub>y</sub></b>,<b>N<sub>z</sub></b>)
</blockquote>
where <b>N<sub>x</sub></b>, <b>N<sub>y</sub></b>, and <b>N<sub>z</sub></b>
are the number of X, Y, and Z data planes displayed, respectively.
Increasing the <a href="#transparency">transparency</a>
and/or the thickness of the displayed data will make the exponent smaller and
(because <b>T<sub>histo</sub></b> &le; 1) individual voxels more transparent.
</p>

<p><a name="byteorder"><b>Byte order</b></a>.
Different computers store the bytes of a single numeric value in
different orders.  PowerPC processors use one order
(called big-endian), while Intel/AMD x86 family processors use the
opposite order (called little-endian).
If a binary data file is created on one machine and read on
another having the opposite byte order, byte-swapping is required
to get the correct numeric values.
The DSN6 file reader assumes that the file was written in big-endian byte
order.  DSN6 files can be read on big- or little-endian machines.
All of the other file readers detect file byte order and machine byte order,
then perform byte-swapping if necessary.
</p>

<hr>
<address>UCSF Resource for Biocomputing, Visualization, and Informatics / 
December 2016</address>
</body></html>
