I think the EyeToScreenDistance value should depend on which set of lenses A, B, or C are being used.  Also I think the optimal value to give the field of view which is most correct and having minimum distortion is not 41 millimeters as the SDK reports, but closer to 47 millimeters if you are using the A lenses, 44 mm if you are using the B lenses and 40 mm if you are using the C lenses for the developer kit 1 (DK1).  This conclusion is based on tests and measurements, but I am not sure if it is correct.  I'll give the details.

I added code to a molecular visualization program I work on called UCSF Chimera to use the oculus rift.  I do radial warping and chromatic aberration correction in the shader in OpenGL and have the head tracking working.  My effort has been to tune this to get the lowest distortion lowest latency I can.  This post is about the distortion issues.

I noticed when using the 41 mm EyeToScreenDistance that turning my head seemed to cause the scene (I'm in the middle of a cross-linked net of collagen filaments from optical microscopy) to appear to rotate slightly (maybe 5 degrees) away from me.  In other words if I turn my head to the left, the scene appears to rotate slightly about the vertical axis spinning to the left.  I say it looks like a rotation, but I believe the cause is really that the depth of different parts of the scene appear to subtly change.  This seemed most likely to be caused by incorrect radial warping, or warping using the wrong field of view.  My shader code follows the Oculus SDK Overview (version 0.2.5) pdf closely and I could not find any problem with my code after extensive tests.  So I started looking at parameters.  First I just tried changing the field of view in degrees and visually testing the effect.  A 10% wider field of view caused even more perception of rotation, a 10% smaller field of view removed the apparent rotation, and a 20% smaller field of view reversed the direction of the apparent rotation.   So I took a close look at how I was computing field of view.

The EyeToScreenDistance is used to determine the field of view and is reported as 41 mm by the SDK.  From my understanding of optics and the formula they give for field of view this distance is a bit misleadingly named -- it in fact should be the distance from the center of the lens to the screen.  By the center of the lens I mean half way through the thickness of the lens at its center.  I measured this value and it is 47 mm for the A lenses, 44 mm for the B lenses, and 40 mm for the C lenses.  I may be off by 1 or 2 mm but I tried to make the measurements carefully.  Using the 47 mm distance gives nearly exactly the 10% reduction in field of view that empirically I found to fix the apparent rotation.  Maybe this was coincidence.  So I put in the C lenses and tested those.  The 40 mm distance then worked best with 47 mm giving a noticeable rotation.  So it appears that this idea that the field of view should depend on the lenses and that the EyeToScreenDistance should really be LensToScreenDistance and depends on which lenses you use may be correct.  You should understand that this is a pretty subtle effect.  To see the apparent rotation I describe requires close attention while turning your head, but the difference is enough that a slight feeling of nausea with the wrong field of view is apparent to me.

As mentioned in an earlier reply the Oculus SDK does not report different EyeToScreenDistance values based on which lens you specify in the configuration tool.  The previous post cited the source code, and I tested it empirically by changing the lens choice with the configuration program and running my code to see what distance value it reported -- always 41 mm.

I noticed a second disturbing shape distortion effect during my tests.  What I described above was with my eyes physically very close to the A lenses.  I have the extension bellows of the goggles adjust almost all the way to the closest eye-lens position.  But if I crank out the bellows to leave much more space between my eyes and the lenses, say to put my glasses on, then there is a new slightly nauseating distortion on close inspection.  As I turn my head and an object goes from right edge to center to left edge of the field of view, that object moves slightly closer in the center position.  So I see the object get closer than farther, relative to what you would expect for a fixed object.  It appears like a ripple distortion rather than a rotation -- far then near then far.  Again it is rather subtle, but its nauseating power is easy to perceive.  This again looks like an error in the radial warping.  I suspect that the radial warping parameters would need to be different if your eyes are further from the lenses versus if your eyes are closer to the lenses.  Unfortunately it is a quite significant effect.  The oculus configuration tool doesn't have any setting for this so the SDK can't give you different radial distortion parameters.  I was also curious whether the radial distortion parameters (1, 0.22, 0.24, 0 for DK1) would change if I specified different lenses A, B, C in the configuration tool.  They do not change.  Probably a careful understanding of the optical paths could suggest how the radial warping parameters need to change as the eye moves further from the lens.  I have not investigated.

Unfortunately it seems that quite noticeable distortion effects, ones that give a subtle feeling a nausea, unless the field of view and warping parameters are just right, and the SDK does not appear to help you get them just right.
