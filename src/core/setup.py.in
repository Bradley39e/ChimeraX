# vim: set expandtab shiftwidth=4 softtabstop=4:
# import distutils.core
# distutils.core.DEBUG = True
from setuptools import setup
from glob import glob
import os
import sys

shlib_dir = "SHLIB_DIR"
pkg_dir = "PKG_DIR"
data_dir = "DATA_DIR"
if sys.platform.startswith('win'):
    # data files are relative to bindir
    rel_inst_shlib_dir = ""  # shlib_dir == bindir
else:
    # data files are relative to rootdir
    rel_inst_shlib_dir = os.path.basename(shlib_dir)

setup(
    name="chimerax.core",
    version="CORE_VERSION",
    description="ChimeraX Core Package",
    author="UCSF RBVI",
    author_email="chimerax@cgl.ucsf.edu",
    url="https://www.rbvi.ucsf.edu/chimerax/",
    package_dir={
        "chimerax.core": pkg_dir,
    },
    packages=[
        "chimerax.core",
        "chimerax.core.atomic",
        "chimerax.core.commands",
        "chimerax.core.devices",
        "chimerax.core.devices.oculus",
        "chimerax.core.devices.spacenavigator",
        "chimerax.core.geometry",
        "chimerax.core.graphics",
        "chimerax.core.map",
        "chimerax.core.map.data",
        "chimerax.core.map.data.apbs",
        "chimerax.core.map.data.ccp4",
        "chimerax.core.map.data.cmap",
        "chimerax.core.map.data.dsn6",
        "chimerax.core.map.data.imagestack",
        "chimerax.core.map.data.mrc",
        "chimerax.core.map.filter",
        "chimerax.core.map.fit",
        "chimerax.core.map.series",
        "chimerax.core.surface",
        "chimerax.core.toolshed",
        "chimerax.core.ui",
        "chimerax.core.webservices",
    ],
    package_data={
        "chimerax.core": ["*.PYMOD_EXT"],
        "chimerax.core.atomic": ["*.SHLIB_EXT", "*.PYMOD_EXT"],
        "chimerax.core.devices.oculus": ["*.PYMOD_EXT"],
        "chimerax.core.devices.spacenavigator": ["*.PYMOD_EXT"],
        "chimerax.core.geometry": ["*.PYMOD_EXT"],
        "chimerax.core.graphics": ["*.txt", "*.PYMOD_EXT"],
        "chimerax.core.map": ["*.PYMOD_EXT"],
        "chimerax.core.surface": ["*.PYMOD_EXT"],
        "chimerax.core.ui": ["*.jpg"],
    },
    data_files=[
        ("", ["timestamp"]),
        (rel_inst_shlib_dir, [
            os.path.join(shlib_dir, "libappdirs.SHLIB_EXT"),
            os.path.join(shlib_dir, "libarrays.SHLIB_EXT"),
            os.path.join(shlib_dir, "liblogger.SHLIB_EXT"),
            os.path.join(shlib_dir, "libatomstruct.SHLIB_EXT"),
            os.path.join(shlib_dir, "libelement.SHLIB_EXT"),
            #WINDEBUG os.path.join(shlib_dir, "libappdirs.pdb"),
            #WINDEBUG os.path.join(shlib_dir, "libarrays.pdb"),
            #WINDEBUG os.path.join(shlib_dir, "liblogger.pdb"),
            #WINDEBUG os.path.join(shlib_dir, "libatomstruct.pdb"),
            #WINDEBUG os.path.join(shlib_dir, "libelement.pdb"),
        ]),
        (os.path.join(os.path.basename(data_dir), "idatm", "templates"),
         glob(os.path.join(data_dir, "idatm", "templates", "*"))),
    ],
    classifiers=[
        "Development Status :: 2 - Pre-Alpha",
        "Environment :: MacOS X :: Aqua",
        "Environment :: Win32 (MS Windows)",
        "Environment :: X11 Applications",
        "Intended Audience :: Science/Research",
        "License :: Free for non-commercial use",
        "Operating System :: MacOS :: MacOS X",
        "Operating System :: Microsoft :: Windows 7",
        "Operating System :: POSIX :: Linux",
        "Programming Language :: Python :: 3",
        "Topic :: Scientific/Engineering :: Visualization",
        "Topic :: Scientific/Engineering :: Chemistry",
        "Topic :: Scientific/Engineering :: Bio-Informatics",
        "ChimeraX-Tools :: ChimeraXCore",
    ],
)
