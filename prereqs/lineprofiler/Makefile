PREREQ_MAKE = 1
TOP	= ../..
include $(TOP)/mk/config.make
include ../pips/Makefile.pip

# pypi is missing binary version for macOS

VERSION = 2.1.2
DISTRIBUTION = line_profiler-$(VERSION).tar.gz
SOURCE = $(tmpdir)/line_profiler-$(VERSION)

all:

install: $(SOURCE)
	cd $(SOURCE) &&	$(PYTHON_EXE) setup.py $(SETUP_ARGS) build install

app-install: install
	cd $(SOURCE) &&	$(APP_PYTHON_EXE) setup.py $(SETUP_ARGS) build install

$(SOURCE):
	tar zxf $(DISTRIBUTION) -C $(tmpdir)
	# force _line_profiler.c to be regenerated by Cython
	rm -f $(SOURCE)/_line_profiler.c

clean:
	rm -rf $(SOURCE)
